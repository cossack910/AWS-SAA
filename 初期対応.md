# AWWS 推奨の認証(セキュリティ向上)

## 1,MFA(多要素認証) の有効化

- google Authenticator を使用

## 2,管理者用の IAM ユーザー作成

#### １ IAM ユーザーを新規作成して、管理者権限を付与

以下全てチェック

**IAM を作成**

- [ ] 入力項目
- AWS マネジメントコンソールへのユーザーアクセスを提供する

  - IAM ユーザーを作成します
  - パスワード自動生成を選択
  - ユーザーは次回のサインイン時に新しいパスワードを作成する必要があります - 推奨・有効

- 許可設定

  - ポリシーを直接アタッチする
  - AdministoratorAccess を許可

- 確認して作成
  - タグとキーを設定する。

#### ２ IAM グループを新規作成してグループを通して管理者権限付与

**ユーザーグループを作成**

- [ ] 入力項目
- グループに名前を付ける
  - わかりやすい名前をつける
- ユーザーをグループに追加 - オプション
  - 1 で作成した管理者ユーザーをチェック
    - **IAM 作成時に付与した権限とグループで管理者権限が重複しているため個別付与のポリシーは削除する**
- 許可ポリシーを添付 - オプション
  - AdministratorAccess にチェックを入れグループ全体に管理者権限を付与する

## 3 AWS CloudTrail を有効果

CloudTrail によりユーザーのアクセスログを取得・監視することができる。

<br>

**クイック証跡の作成**

- [ ] 入力項目
- 証跡名
- S3 のバケットは自動で入力してくれる

**証跡の作成**

Cloudtail -> ダッシュボードから<br>

証跡属性の選択

- [ ] 入力項目
- 証跡名
  - わかりやすい名前をつける
- ストレージの場所
  - S3 バケット新規作成
- 証跡ログバケットおよびフォルダ
  - 自動生成されてる
- ログファイルの SSE-KMS 暗号化
  - 無効(後で有効化する)
- SNS 通知の配信
  - 無効
- CloudWatch Logs
  - 無効
- タグ
- 設定なし

次へ->ログイベントの選択

- [ ] 入力項目
- イベント

  - 管理イベント・有効
  - データイベント・無効(あったほうがいいお金がかかる)
  - insights・無効(あったほうがいいお金がかかる)

- 管理イベント
  - 読み取り・有効
  - 書き込み・有効
  - AWS KMS イベントの除外・無効
  - Amazon RDS のデータ API イベントを除外・無効

Cloud tail->イベント履歴で実行履歴を確認できる
Athena に S3 を吐き出してクエリ解析もできる。
Cloud trail 自体もレイクで解析可能

## 4 AWS の請求アラートを有効化
